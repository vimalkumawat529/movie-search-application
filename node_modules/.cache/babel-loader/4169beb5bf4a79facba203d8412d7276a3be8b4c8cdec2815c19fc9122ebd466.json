{"ast":null,"code":"// movieSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nconst initialState = {\n  movies: [],\n  page: 1,\n  loading: false,\n  hasMore: true,\n  // to stop fetching if no more data\n  error: null\n};\nconst API_URL = \"https://api.themoviedb.org/3/search/movie\";\nconst AUTH_TOKEN = \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZmRhNWNlMmU5NjQ4YTY3ZGJmZDM3YzBkYTQ2MDY3YSIsIm5iZiI6MTczMjc3NzkyMi43MTc5NDE1LCJzdWIiOiI2NzQ4MTYwNDFkMGI1YjNmYjgzM2YyMTYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.rOIeLQi9K6HjHcEVAsbWBxvj9DdNz-y2DvUXpssEjGs\";\n\n// Async thunk to fetch movies\nexport const fetchMovies = createAsyncThunk(\"movies/fetchMovies\", async (query, {\n  getState,\n  rejectWithValue\n}) => {\n  const {\n    page\n  } = getState().movies;\n  const url = `${API_URL}?query=${query}&page=${page}&include_adult=false&language=en-US`;\n  const headers = {\n    accept: \"application/json\",\n    Authorization: AUTH_TOKEN\n  };\n  try {\n    const response = await fetch(url, {\n      headers\n    });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst movieSlice = createSlice({\n  name: \"movies\",\n  initialState,\n  reducers: {\n    resetMovies: state => {\n      state.movies = [];\n      state.page = 1;\n      state.hasMore = true;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchMovies.pending, state => {\n      state.loading = true;\n    }).addCase(fetchMovies.fulfilled, (state, action) => {\n      state.loading = false;\n      if (action.payload.results.length > 0) {\n        state.movies.push(...action.payload.results);\n        state.page += 1; // Increment page for next fetch\n      } else {\n        state.hasMore = false; // No more data to fetch\n      }\n    }).addCase(fetchMovies.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  resetMovies\n} = movieSlice.actions;\nexport default movieSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","initialState","movies","page","loading","hasMore","error","API_URL","AUTH_TOKEN","fetchMovies","query","getState","rejectWithValue","url","headers","accept","Authorization","response","fetch","data","json","message","movieSlice","name","reducers","resetMovies","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","results","length","push","rejected","actions","reducer"],"sources":["/Users/vimalkumawat/Desktop/movie-search-app/src/slices/moviesSlice.js"],"sourcesContent":["// movieSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  movies: [],\n  page: 1,\n  loading: false,\n  hasMore: true, // to stop fetching if no more data\n  error: null,\n};\n\nconst API_URL = \"https://api.themoviedb.org/3/search/movie\";\nconst AUTH_TOKEN =\n  \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZmRhNWNlMmU5NjQ4YTY3ZGJmZDM3YzBkYTQ2MDY3YSIsIm5iZiI6MTczMjc3NzkyMi43MTc5NDE1LCJzdWIiOiI2NzQ4MTYwNDFkMGI1YjNmYjgzM2YyMTYiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.rOIeLQi9K6HjHcEVAsbWBxvj9DdNz-y2DvUXpssEjGs\";\n\n// Async thunk to fetch movies\nexport const fetchMovies = createAsyncThunk(\n  \"movies/fetchMovies\",\n  async (query, { getState, rejectWithValue }) => {\n    const { page } = getState().movies;\n    const url = `${API_URL}?query=${query}&page=${page}&include_adult=false&language=en-US`;\n    const headers = {\n      accept: \"application/json\",\n      Authorization: AUTH_TOKEN,\n    };\n    try {\n      const response = await fetch(url, { headers });\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst movieSlice = createSlice({\n  name: \"movies\",\n  initialState,\n  reducers: {\n    resetMovies: (state) => {\n      state.movies = [];\n      state.page = 1;\n      state.hasMore = true;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchMovies.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(fetchMovies.fulfilled, (state, action) => {\n        state.loading = false;\n        if (action.payload.results.length > 0) {\n          state.movies.push(...action.payload.results);\n          state.page += 1; // Increment page for next fetch\n        } else {\n          state.hasMore = false; // No more data to fetch\n        }\n      })\n      .addCase(fetchMovies.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { resetMovies } = movieSlice.actions;\nexport default movieSlice.reducer;\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,MAAMC,YAAY,GAAG;EACnBC,MAAM,EAAE,EAAE;EACVC,IAAI,EAAE,CAAC;EACPC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE,IAAI;EAAE;EACfC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,OAAO,GAAG,2CAA2C;AAC3D,MAAMC,UAAU,GACd,6PAA6P;;AAE/P;AACA,OAAO,MAAMC,WAAW,GAAGT,gBAAgB,CACzC,oBAAoB,EACpB,OAAOU,KAAK,EAAE;EAAEC,QAAQ;EAAEC;AAAgB,CAAC,KAAK;EAC9C,MAAM;IAAET;EAAK,CAAC,GAAGQ,QAAQ,CAAC,CAAC,CAACT,MAAM;EAClC,MAAMW,GAAG,GAAG,GAAGN,OAAO,UAAUG,KAAK,SAASP,IAAI,qCAAqC;EACvF,MAAMW,OAAO,GAAG;IACdC,MAAM,EAAE,kBAAkB;IAC1BC,aAAa,EAAER;EACjB,CAAC;EACD,IAAI;IACF,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;MAAEC;IAAQ,CAAC,CAAC;IAC9C,MAAMK,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAClC,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOb,KAAK,EAAE;IACd,OAAOM,eAAe,CAACN,KAAK,CAACe,OAAO,CAAC;EACvC;AACF,CACF,CAAC;AAED,MAAMC,UAAU,GAAGvB,WAAW,CAAC;EAC7BwB,IAAI,EAAE,QAAQ;EACdtB,YAAY;EACZuB,QAAQ,EAAE;IACRC,WAAW,EAAGC,KAAK,IAAK;MACtBA,KAAK,CAACxB,MAAM,GAAG,EAAE;MACjBwB,KAAK,CAACvB,IAAI,GAAG,CAAC;MACduB,KAAK,CAACrB,OAAO,GAAG,IAAI;IACtB;EACF,CAAC;EACDsB,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACpB,WAAW,CAACqB,OAAO,EAAGJ,KAAK,IAAK;MACvCA,KAAK,CAACtB,OAAO,GAAG,IAAI;IACtB,CAAC,CAAC,CACDyB,OAAO,CAACpB,WAAW,CAACsB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MACjDN,KAAK,CAACtB,OAAO,GAAG,KAAK;MACrB,IAAI4B,MAAM,CAACC,OAAO,CAACC,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;QACrCT,KAAK,CAACxB,MAAM,CAACkC,IAAI,CAAC,GAAGJ,MAAM,CAACC,OAAO,CAACC,OAAO,CAAC;QAC5CR,KAAK,CAACvB,IAAI,IAAI,CAAC,CAAC,CAAC;MACnB,CAAC,MAAM;QACLuB,KAAK,CAACrB,OAAO,GAAG,KAAK,CAAC,CAAC;MACzB;IACF,CAAC,CAAC,CACDwB,OAAO,CAACpB,WAAW,CAAC4B,QAAQ,EAAE,CAACX,KAAK,EAAEM,MAAM,KAAK;MAChDN,KAAK,CAACtB,OAAO,GAAG,KAAK;MACrBsB,KAAK,CAACpB,KAAK,GAAG0B,MAAM,CAACC,OAAO;IAC9B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAER;AAAY,CAAC,GAAGH,UAAU,CAACgB,OAAO;AACjD,eAAehB,UAAU,CAACiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}